{% extends 'base.html' %}

{% block title %}
  프로필
{% endblock title %}

{% block style %}
  .profile-content {
    display: flex;
    
  }
  
  .user-wrapper {
    width: 25%;
    padding: 2rem;
    border: 1px solid rgb(218, 220, 224);
    border-radius: 0.25rem;
  }

  .user {
    margin-bottom: 1rem;
  }

  .user-image {
    width: 120px;
    height: 120px;
    overflow: hidden;
    border-radius: 50%;
    margin: 0 auto 1.5rem;
  }

  .user-image img {
    width: 100%;
  }

  .user-info {
    text-align: center;
  }

  .user-name {
    font-size: 1.625rem;
    font-weight: bold;
    margin-bottom: 0.825rem;
  }

  .user-follow-wrapper {
    display: flex;
    justify-content: center;
    gap: 1rem;
  }

  .user-follow {
    display: flex;
    position: relative;
    font-size: 0.875rem;
    color: #828c94;
  }

  .user-follow:last-child:before {
    content: "";
    position: absolute;
    width: 1px;
    height: 12px;
    left: -8px;
    top: 8px;
    background-color: #dadce0;
  }

  .user-follow-text {
    margin-right: 0.25rem;
  }

  .user-count {
    color: #525b61;
    font-weight: bold;
  }

  .user-btn {
    margin: 1rem auto 0;
  }

  .update-btn {
    display: inline-block;
    padding: 0.375rem 1rem;
    border: 1px solid #dbdbdb;
    border-radius: 0.25rem;
    color: rgb(41, 41, 41);
    font-size: 0.75rem;
  }

  .update-btn:hover {
    background-color: #fafafa;
  }

  .follow-btn .main-btn {
    width: 140px;
    font-size: 0.975rem;
    padding: 0.5rem;
  }

  .user-mark-group {
    display: flex;
    padding: 1.25rem 0 0.5rem;
    border-top: 1px solid #eaebef;
    color: #292929;
  }

  .user-mark {
    flex-grow: 1;
    text-align: center;
    font-size: 0.875rem;
  }

  .user-mark:hover {
    opacity: 0.7;
    cursor: pointer;
  }

  .user-mark svg {
    width: 28px;
    height: 28px;
    margin-bottom: 0.25rem;
  }

  .user-mark .user-count {
    font-size: 1rem;
  }

  .profile-gap {
    width: 8%;
  }

  .post-wrapper {
    padding: 3rem 0;
  }

  .post-wrapper .title {
    font-size: 1.125rem;
    font-weight: bold;
  }

  .title span {
    color: #35c5f0;
  }
{% endblock style %}

{% block content %}
<div class="container">
  <div class="profile-content">
    <div class="user-wrapper">
      <div class="user">
        <div class="user-image">
          <img src="https://image.ohou.se/i/bucketplace-v2-development/uploads/users/profile_images/1682908711_kakao_2770419516.jpg?gif=1&w=144&h=144&c=c&webp=1" alt="">
        </div>
        <div class="user-info">
          <h1 class="user-name">{{ person.username }}</h1>
          <div class="user-follow-wrapper">
            <div class="user-follow">
              <p class="user-follow-text">팔로잉</p>
              <a href="" class="user-count">{{ person.followings.all|length }}</a>
            </div>
            <div class="user-follow">
              <p class="user-follow-text">팔로워</p>
              <a href="" class="user-count">{{ person.followers.all|length }}</a>
            </div>
          </div>
          <div class="user-btn">
            {% if user == person %}
              <a href="{% url 'accounts:update' %}" class="update-btn">설정</a>
            {% endif %}
            {% if request.user != person %}
              <div class="follow-btn">
                <form action="{% url 'accounts:follow' person.pk %}" method="POST">
                  {% csrf_token %}
                  {% if request.user in person.followers.all %}
                    <input type="submit" value="언팔로우" class="btn main-btn fw-bold">
                  {% else %}
                    <input type="submit" value="팔로우" class="btn main-btn fw-bold">
                  {% endif %}
                </form>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
      {% if user == person %}
        <div class="user-mark-group">
          <div class="user-mark">
            <svg width="24" height="24" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><path fill="currentColor" d="M22.971 7.638c-.548-5.17-7.119-7.135-10.57-2.488a.5.5 0 0 1-.802 0C8.148.503 1.577 2.469 1.029 7.625.642 12.451 3.897 17.183 12 21.436c8.104-4.252 11.36-8.984 10.972-13.798zm.996-.093c.428 5.319-3.137 10.446-11.738 14.899a.5.5 0 0 1-.46 0C3.169 17.99-.395 12.864.034 7.532.656 1.67 7.904-.683 12 4.052 16.096-.683 23.344 1.67 23.967 7.545z"></path></svg>
            <p>좋아요</p>
            {% comment %} 유저가 좋아요 누른 게시글 수를 표시하고 싶은데 아래처럼 하면 될까요? {% endcomment %}
            <p class="user-count">{{ user.like_posts.all|length }}</p>
          </div>
        </div>
      {% endif %}
    </div>

    <div class="profile-gap"></div>

    <div class="post-wrapper">
      <div>
        <h3 class="title">나의 리뷰 <span>{{ user.post_set.all|length }}</span></h3>
      </div>
      <div>
        <h3 class="title">나의 댓글 <span>{{ user.comment_set.all|length }}</span></h3>
      </div>
      <div>
        <h3 class="title">좋아요</h3>
      </div>
    </div>
  </div>
</div>


{% endblock content %}
