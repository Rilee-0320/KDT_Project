{% extends 'base.html' %}

{% block content %}
  <div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="button-home" role="tabpanel" aria-labelledby="button-home-tab" tabindex="0">
      <section class="content container">
        <div class="section-header">
          <h2 class="title">인기 상영작</h2>
        </div>
        <div class="movie-group">
          {% for movie in now_playing %}
            <article class="movie">
              <a class="movie-link" href="{% url 'posts:movie_detail' movie.id %}">
                <div class="movie-poster">
                  <img src="https://image.tmdb.org/t/p/w300{{ movie.poster_path }}" alt="">
                  <div class="movie-ranking">
                    <p class="movie-ranking-number"></p>
                  </div>
                </div>
                <div class="movie-info">
                  <div class="d-flex justify-content-between mb-1 px-1">
                    <p class="title">{{ movie.title }}</p>
                    <span class="rating"><i class="bi bi-star-fill"></i>{{ movie.vote_average }}</span>
                  </div>
                  <div class="movie-category">
                    {% load custom_filters %}
                    <span># {{ genre_dict|get_genre_name:movie.genre_ids.0 }}</span>
                    <span># {{ genre_dict|get_genre_name:movie.genre_ids.1 }}</span>
                  </div>
                </div>
              </a>
            </article>
          {% endfor %}
        </div>
      </section>
    
      <section class="banner container">
        <h5 class="banner-text">~랜덤뽑기 문구~</h5>
        <a href="{% url 'posts:movie_detail' random_movie.id %}" class="banner-button">랜덤 영화 보기</a>
      </section>
    
      <section class="content container">
        <div class="section-header">
          <h2 class="title">평점이 높은 작품</h2>
        </div>
        <div class="movie-group">
          {% for movie in top_rated %}
            <article class="movie">
              <a class="movie-link" href="{% url 'posts:movie_detail' movie.id %}">
                <div class="movie-poster">
                  <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="">
                  <div class="movie-ranking">
                    <p class="movie-ranking-number"></p>
                  </div>
                </div>
                <div class="movie-info">
                  <div class="d-flex justify-content-between mb-1 px-1">
                    <p class="title">{{ movie.title }}</p>
                    <sapn class="rating"><i class="bi bi-star-fill"></i>{{ movie.vote_average }}</sapn>
                  </div>
                  <div class="movie-category">
                    <span># {{ movie.genre_ids }}</span>
                    <span># 코미디</span>
                  </div>
                </div>
              </a>
            </article>
          {% endfor %}
        </div>
      </section>
    
      <section class="content container">
        <div class="section-header">
          <h2 class="title">최근에 개봉했어요!</h2>
        </div>
        <div class="movie-group">
          <article class="movie">
            <a class="movie-link" href="">
              <div class="movie-poster">
                <img src="https://an2-img.amz.wtchn.net/image/v2/WLY8BV7ynF2vdojWdKBGUg.jpg?jwt=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKdmNIUnpJanBiSW1SZk1qZ3dlRFF3TUhFNE1DSmRMQ0p3SWpvaUwzWXlMM04wYjNKbEwybHRZV2RsTHpFMk9ERXhOalE1TVRRMU5ETXlNRGM0TVRjaWZRLlZWR0lYR1NZQkotOWllVVFiV1RQU0JuS28tTlNQSlI4QVlDSVVFRm9wdE0" alt="">
              </div>
              <div class="movie-info">
                <p class="title">슈퍼 마리오 브라더스</p>
                <div class="movie-review">
                  <span class="rating"><i class="bi bi-star-fill"></i>3.4</span>
                  <span>후기 4</span>
                </div>
                <div class="movie-category">
                  <span># 애니메이션</span>
                  <span># 코미디</span>
                </div>
              </div>
            </a>
          </article>
          <article class="movie">
            <a class="movie-link" href="">
              <div class="movie-poster">
                <img src="https://an2-img.amz.wtchn.net/image/v2/yonId_2R_sJbvI3AURuNHw.jpg?jwt=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKdmNIUnpJanBiSW1SZk1qZ3dlRFF3TUhFNE1DSmRMQ0p3SWpvaUwzWXlMM04wYjNKbEwybHRZV2RsTHpFMk9ERTBNemswT1RNME1ERTJNRGMwT0RraWZRLkRwZG45a1BkWGRTSWZjbVVtRklwNjR3RUFrTUFTT1BSNzZQNFNkaS1INm8" alt="">
              </div>
              <div class="movie-info">
                <p class="title">드림</p>
                <div class="movie-review">
                  <span class="rating"><i class="bi bi-star-fill"></i>2.9</span>
                  <span>후기 13</span>
                </div>
                <div class="movie-category">
                  <span># 드라마</span>
                </div>
              </div>
            </a>
          </article>
          <article class="movie">
            <a class="movie-link" href="">
              <div class="movie-poster">
                <img src="https://an2-img.amz.wtchn.net/image/v2/TIxhP_uofjSnN1Wc00igqA.jpg?jwt=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKdmNIUnpJanBiSW1SZk1qZ3dlRFF3TUhFNE1DSmRMQ0p3SWpvaUwzWXlMM04wYjNKbEwybHRZV2RsTHpFMk56YzFOamN5TmpZek56SXdNVFUwTURRaWZRLmNnT3BLOC1QVEV4bDByQWdJY2dIWWVaOURWZlA4Sk9uVTNVTC1FYXg1T1E" alt="">
              </div>
              <div class="movie-info">
                <p class="title">가디언즈 오브 갤럭시: Volume 3</p>
                <div class="movie-review">
                  <span class="rating"><i class="bi bi-star-fill"></i>0</span>
                  <span>후기 0</span>
                </div>
                <div class="movie-category">
                  <span># 액션</span>
                  <span># 코미디</span>
                </div>
              </div>
            </a>
          </article>
          <article class="movie">
            <a class="movie-link" href="">
              <div class="movie-poster">
                <img src="https://an2-img.amz.wtchn.net/image/v2/Gj9piK9dLotP-7jFSgLuZw.jpg?jwt=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKdmNIUnpJanBiSW1SZk1qZ3dlRFF3TUhFNE1DSmRMQ0p3SWpvaUwzWXlMM04wYjNKbEwybHRZV2RsTHpFMk9EQTNPVFl6TXprNU5qYzBNamc1TURBaWZRLkV6MlpieEtfakR4b2h1SVhvcHU5eVRBOUo2dFVrMnhOM3J2eDlMSmNaZHc" alt="">
              </div>
              <div class="movie-info">
                <p class="title">존 윅 4</p>
                <div class="movie-review">
                  <span class="rating"><i class="bi bi-star-fill"></i>3.7</span>
                  <span>후기 27</span>
                </div>
                <div class="movie-category">
                  <span># 스릴러</span>
                  <span># 액션</span>
                </div>
              </div>
            </a>
          </article>
          <article class="movie">
            <a class="movie-link" href="">
              <div class="movie-poster">
                <img src="https://an2-img.amz.wtchn.net/image/v2/HaTjW_4v3cZnU9ukZvTSrw.jpg?jwt=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKdmNIUnpJanBiSW1SZk1qZ3dlRFF3TUhFNE1DSmRMQ0p3SWpvaUwzWXlMM04wYjNKbEwybHRZV2RsTHpFMk56RTNOalk0TlRjMU1EVTFNamMzTWpVaWZRLncyaWZ6TU1LM2hGUy1GNnhKczlDNzFlYkVuMDZMb2ZyZXdaMWI3SjZxS1k" alt="">
              </div>
              <div class="movie-info">
                <p class="title">더 퍼스트 슬램덩크</p>
                <div class="movie-review">
                  <span class="rating"><i class="bi bi-star-fill"></i>4.1</span>
                  <span>후기 31</span>
                </div>
                <div class="movie-category">
                  <span># 애니메이션</span>
                  <span># 스포츠</span>
                </div>
              </div>
            </a>
          </article>
        </div>
      </section>
    </div>

    <div class="tab-pane fade" id="button-romance" role="tabpanel" aria-labelledby="button-romance-tab" tabindex="0">
      <section class="content container">
        <div class="section-header">
          <h2 class="title">로맨스</h2>
        </div>
        <div class="movie-group">
          {% for movies in genre_movie_list %}
            {% for movie in movies %}
              {% if 10749 in movie.genre_ids %}
                <article class="movie">
                  <a class="movie-link" href="{% url 'posts:movie_detail' movie.id %}">
                    <div class="movie-poster">
                      <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="">
                      {% comment %} <div class="movie-ranking">
                        <p class="movie-ranking-number"></p>
                      </div> {% endcomment %}
                    </div>
                    <div class="movie-info">
                      <p class="title">{{ movie.title }}</p>
                      <div class="movie-review">
                        <span class="rating"><i class="bi bi-star-fill"></i>{{ movie.vote_average }}</span>
                        <span>후기 {{ movie.vote_count }}</span>
                      </div>
                      <div class="movie-category">
                        <span># {{ movie.genre_ids }}</span>
                        <span># 코미디</span>
                      </div>
                    </div>
                  </a>
                </article>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </div>
      </section>
    </div>

    <div class="tab-pane fade" id="button-action" role="tabpanel" aria-labelledby="button-action-tab" tabindex="0">
      <section class="content container">
        <div class="section-header">
          <h2 class="title">액션</h2>
        </div>
        <div class="movie-group">
          {% for movies in genre_movie_list %}
            {% for movie in movies %}
              {% if 28 in movie.genre_ids %}
                <article class="movie">
                  <a class="movie-link" href="{% url 'posts:movie_detail' movie.id %}">
                    <div class="movie-poster">
                      <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="">
                      {% comment %} <div class="movie-ranking">
                        <p class="movie-ranking-number"></p>
                      </div> {% endcomment %}
                    </div>
                    <div class="movie-info">
                      <p class="title">{{ movie.title }}</p>
                      <div class="movie-review">
                        <span class="rating"><i class="bi bi-star-fill"></i>{{ movie.vote_average }}</span>
                        <span>후기 {{ movie.vote_count }}</span>
                      </div>
                      <div class="movie-category">
                        <span># {{ movie.genre_ids }}</span>
                        <span># 코미디</span>
                      </div>
                    </div>
                  </a>
                </article>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </div>
      </section>
    </div>
    
    <div class="tab-pane fade" id="button-comedy" role="tabpanel" aria-labelledby="button-comedy-tab" tabindex="0">
      <section class="content container">
        <div class="section-header">
          <h2 class="title">코미디</h2>
        </div>
        <div class="movie-group">
          {% for movies in genre_movie_list %}
            {% for movie in movies %}
              {% if 35 in movie.genre_ids %}
                <article class="movie">
                  <a class="movie-link" href="{% url 'posts:movie_detail' movie.id %}">
                    <div class="movie-poster">
                      <img src="https://image.tmdb.org/t/p/w200{{ movie.poster_path }}" alt="">
                      {% comment %} <div class="movie-ranking">
                        <p class="movie-ranking-number"></p>
                      </div> {% endcomment %}
                    </div>
                    <div class="movie-info">
                      <p class="title">{{ movie.title }}</p>
                      <div class="movie-review">
                        <span class="rating"><i class="bi bi-star-fill"></i>{{ movie.vote_average }}</span>
                        <span>후기 {{ movie.vote_count }}</span>
                      </div>
                      <div class="movie-category">
                        <span># {{ genre_dict }}</span>
                        <span># 코미디</span>
                      </div>
                    </div>
                  </a>
                </article>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </div>
      </section>
    </div>
  </div>
  
{% endblock content %}